@page "/storepage"

<h1>Main store!</h1>
<link rel="stylesheet" href="css/styles.css">

<main>
    <section class="medicines">
        <div class="medicine">
            <img src="images/Glucosamine.jpg" alt="Glucosamine">
            <h2>Best Vitamins to stay healthy</h2>
            <p>Price: $10.99</p>
            <button @onclick='() => AddToCart(new MedicineInc.Shared.Domain.Medicine {
            <button @onclick='() => AddToCart(new Medicine {
                Id = 1,
                MediName = "Glucosamine",
                Usage = "Best Vitamins to stay healthy",
                Price = 10.99,
                ImageRef = "images/Glucosamine.jpg"
                MediName = "Glucosamine",
                Price = 10.99,
                ImageRef = "images/Glucosamine.jpg"
            })'>
                Add to Cart
            </button>
        </div>

        <div class="medicine">
            <img src="images/panadol.jpg" alt="Panadol">
            <h2>Most Popular Item for Cold and Fever</h2>
            <p>Price: $5.99</p>
            <button @onclick='() => AddToCart(new MedicineInc.Shared.Domain.Medicine {
            <button @onclick='() => AddToCart(new Medicine {
                Id = 2,
                MediName = "Panadol",
                Usage = "Most Popular Item for Cold and Fever",
                Price = 5.99,
                ImageRef = "images/panadol.jpg"
                MediName = "Panadol",
                Price = 5.99,
                ImageRef = "images/panadol.jpg"
            })'>
                Add to Cart
            </button>
        </div>

        <div class="medicine">
            <img src="images/bandaids.jpg" alt="Bandaids">
            <h2>For your child's injuries</h2>
            <p>Price: $7.50</p>
            <button @onclick='() => AddToCart(new MedicineInc.Shared.Domain.Medicine {
            <button @onclick='() => AddToCart(new Medicine {
                Id = 3,
                MediName = "Bandaids",
                Usage = "For any and all injuries",
                Price=7.50,
                ImageRef="images/bandaids.jpg"
                })'>
                MediName = "Bandaids",
                Price = 7.50,
                ImageRef = "images/bandaids.jpg"
            })'>
                Add to Cart
            </button>
        </div>

        <div class="medicine">
            <img src="images/strepsils.jpg" alt="Strepsils">
            <h2>To soothe your sore throat</h2>
            <p>Price: $4.25</p>
            <button @onclick='() => AddToCart(new MedicineInc.Shared.Domain.Medicine {
            <button @onclick='() => AddToCart(new Medicine {
                Id = 4,
                MediName = "Strepsils",
                Usage = "To soothe your sore throat",
                Price = 4.25,
                ImageRef = "images/strepsils.jpg"
                MediName = "Strepsils",
                Price = 4.25,
                ImageRef = "images/strepsils.jpg"
            })'>
                Add to Cart
            </button>
        </div>
    </section>
</main>

<footer>
    <p>&copy; 2024 Online Pharmacy</p>
</footer>

@code {
    private List<MedicineInc.Shared.Domain.Medicine> cartItems = new List<MedicineInc.Shared.Domain.Medicine>();
    private List<Medicine> cartItems = new List<Medicine>();

    void AddToCart(Medicine medicine)
    {
        var existingMedicine = cartItems.FirstOrDefault(item => item.Id == medicine.Id);

    void AddToCart(MedicineInc.Shared.Domain.Medicine medicine)
    {
        cartItems.Add(medicine);
        Console.WriteLine($"{medicine.MediName} added to cart!");
        if (existingMedicine != null)
        {
            // If the medicine is already in the cart, increment the quantity
            existingMedicine.Count++;
            Console.WriteLine($"Quantity of {existingMedicine.MediName} increased to {existingMedicine.Count} in cart!");
        }
        else
        {
            // If the medicine is not in the cart, add a new entry
            cartItems.Add(new Medicine
                {
                    Id = medicine.Id,
                    MediName = medicine.MediName,
                    Price = medicine.Price,
                    Count = 1,
                    Usage = medicine.Usage,
                    ImageRef = medicine.ImageRef
                });

            Console.WriteLine($"{medicine.MediName} added to cart!");
        }
    }
}
